<!DOCTYPE html>
<html lang="en" translate="no">
<meta name="google" content="notranslate">

<head>
  <!--ANALIS GOOGLE  -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B6FFWRDQWC"></script>
  <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments) } gtag("js", new Date); gtag("config", "G-B6FFWRDQWC");</script>
  <!-- ANALIS GOOGLE END   -->
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
  <link rel="icon" type="image/icon" href="img_bg/favicon2.ico" />
  <title>S.G.Shopping Cart</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection" />
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection" />
</head>

<body>
  <!--NEW MENU FOR ALL-->
  <nav class="deep-purple lighten-4">
    <div class="nav-wrapper container">
      <a href="index.html" class="brand-logo logostyle"><img src="img_bg/logo_top.png" alt="S.Glass Logo" /></a>
      <ul class="right hide-on-med-and-down">
        <!--1 drop-->
        <li>
          <a class="dropdown-trigger" href="#!" data-target="dropdown1">Glass<i
              class="material-icons right">local_bar</i></a>
        </li>
        <!--2 drop-->
        <li>
          <a class="dropdown-trigger" href="#!" data-target="dropdown2">Wood<i
              class="material-icons right">forest</i></a>
        </li>
        <!--3 drop-->
        <li>
          <a class="dropdown-trigger" href="#!" data-target="dropdown3">Candles<i
              class="material-icons right">fireplace</i></a>
        </li>
        <!--4 drop-->
        <li>
          <a class="" href="pages/sets/sets.html">Sets<i class="material-icons right">restaurant</i></a>
        </li>
        <!--5 drop-->
        <li>
          <a class="" href="pages/icons/icons.html">Icons<i class="material-icons right">church</i></a>
        </li>
        <!--6 drop CONTACS-->
        <!-- Modal Trigger -->
        <li>
          <a class="modal-trigger white black-text" href="#modal1">About<i class="material-icons right">phone</i></a>
        </li>
        <!-- Modal Structure -->
        <div id="modal1" class="modal">
          <div class="modal-content deep-purple-text contact-card-wrapper">
            <div class="contact-card">
              <h4 class="center-align">Contacts :</h4>
              <div>Vitaliy : +380 (66) 838 44 33 / +380 (67) 167 49 62</div>
              <div>Vitaliy 2 : +380 (95) 489 06 58</div>
              <div>Email@ : vitaliyvulcan@yahoo.com</div>
              <div class="contact-icons-container">
                <a href="viber://add?number=+380954890658" target="_blank"><img src="img_bg/viber.svg" alt="Viber"
                    class="contact-icon" /></a>
                <a href="https://wa.me/380954890658" target="_blank"><img src="img_bg/whatsapp.svg" alt="WhatsApp"
                    class="contact-icon" /></a>
                <a href="https://t.me/V_zhyt" target="_blank"><img src="img_bg/telegram.svg" alt="Telegram"
                    class="contact-icon" /></a>
                <a href="https://www.facebook.com/weddingaccessoriesrom" target="_blank"><img src="img_bg/facebook.svg"
                    alt="Facebook" class="contact-icon" /></a>
                <a href="https://www.instagram.com/wedd.ro?igsh=bDRndDczbTFvY2d3" target="_blank"><img
                    src="img_bg/instagram.svg" alt="Instagram" class="contact-icon" /></a>
              </div>
            </div>
            <iframe class="hide-on-med-and-up"
              src="https://www.google.com/maps/d/embed?mid=19Knz1RH4YBMKE7O2j1xqDskTpmk&ehbc=2E312F" width="100%"
              height="480"></iframe>
            <iframe class="show-on-small"
              src="https://www.google.com/maps/embed?pb=!1m10!1m8!1m3!1d575.3859675341954!2d25.960776980033184!3d48.31023646307046!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sru!2sua!4v1696861044631!5m2!1sru!2sua"
              width="100%" height="450" style="border: 0" allowfullscreen="" loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"></iframe>
          </div>
          <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-light btn-small deep-purple lighten-4"><i
                class="material-icons right">close</i>Close</a>
          </div>
        </div>
      </ul>
      <!--MOBILE MENU-->
      <ul id="nav-mobile" class="sidenav">
        <!--1 drop-->
        <li>
          <a class="dropdown-trigger" href="#!" data-target="dropdown1m">Glass<i
              class="material-icons right">local_bar</i></a>
        </li>
        <!--2 drop-->
        <li>
          <a class="dropdown-trigger" href="#!" data-target="dropdown2m">Wood<i
              class="material-icons right">forest</i></a>
        </li>
        <!--3 drop-->
        <li>
          <a class="dropdown-trigger" href="#!" data-target="dropdown3m">Candles<i
              class="material-icons right">fireplace</i></a>
        </li>
        <!--4 drop-->
        <li>
          <a class="!#" href="pages/sets/sets.html">Sets<i class="material-icons right">restaurant</i></a>
        </li>
        <!--5 drop-->
        <li>
          <a class="!#" href="pages/icons/icons.html">Icons<i class="material-icons right">church</i></a>
        </li>
        <li>
          <a class="dropdown-trigger white black-text" data-target="dropdown5m" href="#!">About<i
              class="material-icons right">phone</i></a>
        </li>
      </ul>
      <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  <!-- Dropdown Structure FOR BIG SCREENS -->

  <!--DROP FOR 1-->
  <ul id="dropdown1" class="dropdown-content">
    <li>
      <a class="center-align" href="pages/glass/drawn/drawn.html"><i class="material-icons">brush</i>Drawn</a>
    </li>
    <li>
      <a class="center-align" href="pages/glass/paint/paint.html"><i
          class="material-icons">format_color_fill</i>Painted</a>
    </li>
    <li>
      <a class="center-align" href="pages/glass/stickers/stickers.html"><i
          class="material-icons">photo_album</i>Stickers</a>
    </li>
    <li>
      <a class="center-align" href="pages/glass/crystal/crystal.html"><i class="material-icons">diamond</i>Crystal</a>
    </li>
    <li>
      <a class="center-align" href="pages/glass/engrave/engrave.html"><i
          class="material-icons">all_inclusive</i>Engraving</a>
    </li>
    <li class="divider"></li>
    <li>
      <a class="center-align" href="pages/glass/autocolante/autocolante.html"><i
          class="material-icons">photo_album</i>Autocolante</a>
    </li>
  </ul>
  <!--DROP FOR 2-->
  <ul id="dropdown2" class="dropdown-content">
    <li>
      <a class="center-align" href="pages/wood/box_house/boxhouse.html"><i class="material-icons">home</i>Money
        boxes</a>
    </li>
    <li class="divider"></li>
    <li>
      <a class="center-align" href="pages/wood/rings_m/r_main.html"><i class="material-icons">favorite_border</i>Ring
        boxes</a>
    </li>
    <li>
      <a class="center-align" href="pages/wood/rings_sec/r_sec.html"><i class="material-icons">favorite</i>Ring boxes
        VIP</a>
    </li>
    <li class="divider"></li>
    <li>
      <a class="center-align" href="pages/wood/han_hold/hangs.html"><i class="material-icons">checkroom</i>Hangers &
        supports</a>
    </li>
  </ul>
  <!--DROP FOR 3-->
  <ul id="dropdown3" class="dropdown-content">
    <li>
      <a class="center-align" href="pages/candles/drawn/candles_draw.html"><i class="material-icons">brush</i>Drawn</a>
    </li>
    <li>
      <a class="center-align" href="pages/candles/paint/candles_paint.html"><i
          class="material-icons">format_color_fill</i>Painted</a>
    </li>
    <li>
      <a class="center-align" href="pages/candles/stickers/candles_stickers.html"><i
          class="material-icons">photo_album</i>Stickers</a>
    </li>
  </ul>

  <!-- Dropdown Structure FOR MOBILE -->

  <!--DROP FOR 1-->
  <ul id="dropdown1m" class="dropdown-content">
    <li>
      <a href="pages/glass/drawn/drawn.html"><i class="material-icons">brush</i>Drawn</a>
    </li>
    <li>
      <a href="pages/glass/paint/paint.html"><i class="material-icons">format_color_fill</i>Painted</a>
    </li>
    <li>
      <a href="pages/glass/stickers/stickers.html"><i class="material-icons">photo_album</i>Stickers</a>
    </li>
    <li>
      <a href="pages/glass/crystal/crystal.html"><i class="material-icons">diamond</i>Crystal</a>
    </li>
    <li>
      <a href="pages/glass/engrave/engrave.html"><i class="material-icons">all_inclusive</i>Engraving</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="pages/glass/autocolante/autocolante.html"><i class="material-icons">photo_album</i>Autocolante🇷🇴</a>
    </li>
  </ul>
  <!--DROP FOR 2-->
  <ul id="dropdown2m" class="dropdown-content">
    <li>
      <a href="pages/wood/box_house/boxhouse.html"><i class="material-icons">home</i>Money boxes</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="pages/wood/rings_m/r_main.html"><i class="material-icons">favorite_border</i>Rings</a>
    </li>
    <li>
      <a href="pages/wood/rings_sec/r_sec.html"><i class="material-icons">favorite</i>Rings VIP</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="pages/wood/han_hold/hangs.html"><i class="material-icons">checkroom</i>Supports UA/RO</a>
    </li>
  </ul>
  <!--DROP FOR 3-->
  <ul id="dropdown3m" class="dropdown-content">
    <li>
      <a href="pages/candles/drawn/candles_draw.html"><i class="material-icons">brush</i>Drawn</a>
    </li>
    <li>
      <a href="pages/candles/paint/candles_paint.html"><i class="material-icons">format_color_fill</i>Painted</a>
    </li>
    <li>
      <a href="pages/candles/stickers/candles_stickers.html"><i class="material-icons">photo_album</i>Stickers</a>
    </li>
  </ul>
  <!--DROP FOR 5-->
  <ul id="dropdown5m" class="dropdown-content">
    <li><a href="tel:+380954890658">Call +380(95)-489-06-58</a></li>
    <li><a href="tel:+380668384433">Call +380(66)-838-44-33</a></li>
    <li>
      <a href="https://www.instagram.com/wedd.ro?igsh=bDRndDczbTFvY2d3">Instagram</a>
    </li>
  </ul>

  <!--CENTER PARALLAX CONTENT-->
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
      <div class="parallax-container">
        <div class="parallax">
          <div class="parallax">
            <img src="img_bg/cart_bg.png" />
          </div>
        </div>
        <br /><br />
        <div class="container text-title-color">
          <h1 class="header left-align white-text">S.Glass - Shopping cart</h1>
          <div class="divider"></div>
          <h3 class="header left-align white-text">Your order |</h3>
        </div>
        <!--<div class="row center">
            <h5 class="header col s12 light">Welcome to the page where most of our accessories are collected</h5>
          </div> -->
        <br /><br />
      </div>
    </div>
  </div>

  <!--END OF COPY -->

  <div class="container">
    <div class="section">
      <blockquote>
        
        <ul class="collapsible popout">
          <li>
            <div class="collapsible-header"><i class="material-icons">announcement</i><img src="img_bg/usa.png" alt="USA Flag" class="flag-icon" />
              >>Important information. Please read carefully before placing an order. <br /></div>
            <div class="collapsible-body"><span>Here you can easily place your order by writing in the comments your preferences regarding color, quantity,
              etc. <br>
              Example order: <br>
              Model - gp_2 <br>
              Quantity - 4 (for glasses, the number refers to pairs)<br>
              Comment - white/black (2 pairs), cream/black (2 pairs)<br>
              Based on the main available colors for glasses:<br>
              Hand-painted: white, cream, silver, black, and their variations<br>
              Painted: white, cream, silver, gold, black, and their variations<br>
              Stickers: white, cream, gold, silver, black<br>
              Laser engraving: only gray, gold, silver in pairs<br>
              Crystal: possible fillings – white, gold, and silver<br>
              Other colors are available only for HAND-PAINTED and PAINTED options upon request.
              For other types of items, all available variations of each type are shown in the photos.</span></div>
          </li>
          <li>
            <div class="collapsible-header"><i class="material-icons">announcement</i> <img src="img_bg/ua.png" alt="Ukraine Flag" class="flag-icon" />
              >>Важлива інформація. Будь ласка, уважно прочитайте перед замовленням.</div>
            <div class="collapsible-body"><span> Тут ви можете легко оформити своє замовлення, написавши в коментарях ваші побажання щодо кольору, кількості
              тощо.<br>
              Приклад замовлення:<br>
              Модель -  gp_2<br>
              Кількість - 4 (для бокалів вказується кількість пар)<br>
              Коментар - білий/чорний (2 пари), крем/чорний (2 пари)<br>
              Основні доступні кольори для бокалів:<br>
              Розписні: білий, кремовий, срібний, чорний та їх варіації<br>
              Фарбовані: білий, кремовий, срібний, золотий, чорний та їх варіації<br>
              Наліпки: білий, кремовий, золотий, срібний, чорний<br>
              Лазерне гравіювання: тільки сірий, золотий, срібний у парі<br>
              Кришталь: можлива засипка біла, золота або срібна<br>
              Інші кольори можливі тільки для РОЗПИСНИХ та ФАРБОВАНИХ під замовлення.
              Для інших видів товарів усі варіанти одного типу є на фото.</span></div>
          </li>
          <li>
            <div class="collapsible-header"><i class="material-icons">announcement</i><img src="img_bg/ro.png" alt="Romania Flag" class="flag-icon" />
              >>Informații importante. Vă rugăm să citiți cu atenție înainte de a plasa comanda.</div>
            <div class="collapsible-body"><span>Aici puteți plasa cu ușurință comanda dvs., scriind în comentarii preferințele privind culoarea, cantitatea
              etc. <br>
              Exemplu de comandă: <br>
              Model - gp_2<br>
              Cantitate - 4 (pentru pahare se indică numărul de perechi) <br>
              Comentariu - alb/negru (2 perechi), crem/negru (2 perechi) <br>
              Culorile principale disponibile pentru pahare: <br>
              Pictate manual: alb, crem, argintiu, negru și variațiile acestora <br>
              Vopsite: alb, crem, argintiu, auriu, negru și variațiile acestora <br>
              Autocolante: alb, crem, auriu, argintiu, negru <br>
              Gravură laser: doar gri, auriu, argintiu în pereche <br>
              Cristal: posibil umplut cu alb, auriu sau argintiu <br>
              Alte culori sunt posibile doar pentru PICTATE MANUAL și VOPSITE la comandă.
              Pentru celelalte tipuri de produse, toate variantele disponibile ale unui tip sunt prezentate în fotografii.</span></div>
          </li>
        </ul>
      </blockquote>
      <div class="row">
        <!-- TWO TYPES OF RESIZE 1-anysize_ht /// 2-anysize_wd /// FOR WIDE AND HEIGHT ORIENT IMG -->
        <!-- TWO TYPES OF RESIZE 1-anysize_ht /// 2-anysize_wd /// FOR WIDE AND HEIGHT ORIENT IMG -->
        <!-- WRITE THEM INTO IMG MATERIALBOXED class-->
        <div id="cartTable" class="cart-container">
          <h5><i class="material-icons left">shopping_cart</i>Your shopping cart</h5>
      
          <div class="row">
            <div class="input-field col s12 m6">
              <input id="name" type="text" />
              <label for="name"><i class="material-icons left">people</i>Name / Surname</label>
            </div>
            <div class="input-field col s12 m6">
              <input id="phone" type="text" />
              <label for="phone"><i class="material-icons left">phone</i>Phone</label>
            </div>
          </div>
      
          <table class="striped responsive-stack">
            <thead>
              <tr>
                <th>Article</th>
                <th style="width:120px">Quantity</th>
                <th>Comment</th>
                <th style="width:120px">Photo</th>
                <th style="width:90px">Delete</th>
              </tr>
            </thead>
            <tbody id="cart-body"></tbody>
          </table>
      
          <div class="actions" style="margin-top:16px">
            <button class="btn green" onclick="sendOrder()"><i class="material-icons left">mail_outline</i>Send order</button>
            <button class="btn blue" onclick="downloadPdfPreview()"><i class="material-icons left">picture_as_pdf</i>Download PDF</button>
            <button class="btn grey" onclick="clearCart()"><i class="material-icons left">close</i>Clear</button>
          </div>
        </div>
      
      <script>
      const BASIN_URL = "https://usebasin.com/f/372619309b48"; // твой Basin  :contentReference[oaicite:2]{index=2}
      
      // ---------- УТИЛИТЫ ----------
      function absUrl(p) {
        return new URL(String(p || '').replace(/^\/+/, ''), window.location.origin).href;
      }
      function getCart(){ return JSON.parse(localStorage.getItem('cart') || '[]'); }
      function setCart(c){ localStorage.setItem('cart', JSON.stringify(c)); }
      
      // ---------- РЕНДЕР КОРЗИНЫ ----------
      function renderCart() {
        const cart = getCart();
        const tbody = document.getElementById('cart-body');
        tbody.innerHTML = '';
      
        if (!cart.length) {
          tbody.innerHTML = `<tr><td colspan="5" style="padding:24px; text-align:center; color:#777">Cart is empty</td></tr>`;
          return;
        }
      
        cart.forEach((it, i) => {
          const tr = document.createElement('tr');
      
          // Артикул
          const tdA = document.createElement('td');
tdA.textContent = it.article;
tdA.setAttribute('data-label', 'Article');
tr.appendChild(tdA);
      
          // Количество
          const tdQ = document.createElement('td');
          tdQ.setAttribute('data-label', 'Quantity');
          const qty = document.createElement('input');
          qty.type = 'number'; qty.min = '1'; qty.value = it.quantity;
          qty.className = 'browser-default';
          qty.oninput = () => { 
        const c = getCart();
        const val = parseInt(qty.value, 10);
        c[i] = { ...c[i], quantity: isNaN(val) || val < 1 ? 1 : val };
        setCart(c);
      };
          tdQ.appendChild(qty);
          tr.appendChild(tdQ);
      
          // Комментарий
          const tdC = document.createElement('td');
          tdC.setAttribute('data-label', 'Comment');
          const cmt = document.createElement('input');
          cmt.type = 'text'; cmt.value = it.comment || '';
          cmt.className = 'browser-default';
          cmt.oninput = () => { 
        const c = getCart();
        c[i] = { ...c[i], comment: cmt.value };
        setCart(c);
        };
          tdC.appendChild(cmt);
          tr.appendChild(tdC);
      
          // Фото (миниатюра)
          const tdI = document.createElement('td');
          tdI.setAttribute('data-label', 'Photo');
          const img = document.createElement('img');
          img.src = absUrl(it.imagePath);          /* Раньше было img.src = it.imagePath;  */  /* :contentReference[oaicite:3]{index=3} */
          img.alt = it.article;
          tdI.appendChild(img);
          tr.appendChild(tdI);
      
          // Удалить
          const tdD = document.createElement('td');
          tdD.setAttribute('data-label', 'Delete');
          const btn = document.createElement('button');
          btn.className = 'btn remove-btn';
          btn.innerHTML = '<i class="material-icons">delete</i>';
          btn.onclick = () => { 
            const c = getCart(); c.splice(i,1); setCart(c); renderCart('#cartTable'); 
          };
          tdD.appendChild(btn);
          tr.appendChild(tdD);
      
          tbody.appendChild(tr);
        });
      }
      
      function clearCart(){
        localStorage.removeItem('cart');
        renderCart('#cartTable');
        if (window.M?.toast) M.toast({html:'Cart is Cleared'});
      }
      
      // ---------- PDF: загрузка шрифтов с кириллицей ----------
      let _pdfFontsCache = null; // { regular: base64, bold: base64 }
      async function bufferToBase64(buf){
        const bytes = new Uint8Array(buf);
        let binary = '';
        const chunk = 0x8000;
        for (let i = 0; i < bytes.length; i += chunk) {
          binary += String.fromCharCode.apply(null, bytes.subarray(i, i + chunk));
        }
        return btoa(binary);
      }
      async function ensurePdfFonts(){
        if (_pdfFontsCache) return _pdfFontsCache;
        const regURL = absUrl('/fonts/NotoSans-Regular.ttf');
        const boldURL = absUrl('/fonts/NotoSans-Bold.ttf');
        const [reg, bold] = await Promise.all([
          fetch(regURL).then(r => r.arrayBuffer()),
          fetch(boldURL).then(r => r.arrayBuffer())
        ]);
        _pdfFontsCache = {
          regular: await bufferToBase64(reg),
          bold: await bufferToBase64(bold)
        };
        return _pdfFontsCache;
      }
      
      // ---------- PDF ГЕНЕРАЦИЯ ----------
      async function fetchAsDataURL(url){
        const res = await fetch(url);
        if (!res.ok) throw new Error('image fetch failed: ' + url);
        const blob = await res.blob();
        return await new Promise(resolve => {
          const r = new FileReader();
          r.onloadend = () => resolve(r.result);
          r.readAsDataURL(blob);
        });
      }
      
      async function buildPdfBlob() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF({ unit: 'mm', format: 'a4' });
      
        // встраиваем кириллический шрифт if no a lot of artifacts
        const fonts = await ensurePdfFonts();
        doc.addFileToVFS('NotoSans-Regular.ttf', fonts.regular);
        doc.addFont('NotoSans-Regular.ttf', 'NotoSans', 'normal');
        doc.addFileToVFS('NotoSans-Bold.ttf', fonts.bold);
        doc.addFont('NotoSans-Bold.ttf', 'NotoSans', 'bold');
        doc.setFont('NotoSans', 'normal');
      
        const name = (document.getElementById('name').value || '').trim();
        const phone = (document.getElementById('phone').value || '').trim();
        const cart = getCart();
      
        // Заголовок
        doc.setFontSize(16);
        doc.setFont('NotoSans', 'bold');
        doc.text('Order', 14, 14);
        doc.setFont('NotoSans', 'normal');
        doc.setFontSize(11);
        doc.text(`Name: ${name || '-'}`, 14, 22);
        doc.text(`Phone number: ${phone || '-'}`, 14, 28);
      
        // Шапка таблицы
        let y = 38;
        doc.setFillColor(245,245,245);
        doc.rect(12, y-6, 186, 10, 'F');
        doc.setFontSize(11);
        doc.text('Article', 14, y);
        doc.text('Quantity', 70, y);
        doc.text('Comment', 92, y);
        doc.text('Photo', 170, y);
      
        y += 6;
      
        // Строки
        for (let i=0; i<cart.length; i++){
          const rowTop = y - 5;
          const it = cart[i];
      
          doc.setFontSize(10);
          doc.text(String(it.article||'-'), 14, y);
          doc.text(String(it.quantity||1), 70, y);
      
          // Комментарий с переносом
          const comment = (it.comment || '-').toString();
          const split = doc.splitTextToSize(comment, 68);
          doc.text(split, 92, y);
      
          // Картинка (30x30 мм справа)
          try {
            const imgUrl = absUrl(it.imagePath);
            const dataUrl = await fetchAsDataURL(imgUrl);
            const mime = dataUrl.slice(5, dataUrl.indexOf(';')); // image/png или image/jpeg
            const fmt = mime.endsWith('png') ? 'PNG' : 'JPEG';
            doc.addImage(dataUrl, fmt, 164, rowTop-2, 30, 30);
          } catch(e) {
            doc.setDrawColor(180); doc.rect(164, rowTop-2, 30, 30);
          }
      
          const textHeight = (split.length * 5) + 6;
          const rowHeight = Math.max(30, textHeight);
      
          doc.setDrawColor(230);
          doc.line(12, rowTop + rowHeight + 1, 198, rowTop + rowHeight + 1);
      
          y = rowTop + rowHeight + 8;
      
          if (y > 280 && i < cart.length - 1) {
            doc.addPage();
            y = 20;
          }
        }
      
        return new Blob([doc.output('arraybuffer')], { type: 'application/pdf' });
      }
      
      // Скачать PDF локально
      async function downloadPdfPreview(){
        const pdfBlob = await buildPdfBlob();
        const url = URL.createObjectURL(pdfBlob);
        const a = document.createElement('a');
        a.href = url; a.download = 'order.pdf'; a.click();
        URL.revokeObjectURL(url);
      }
      
      // ---------- ОТПРАВКА В BASIN c PDF ВЛОЖЕНИЕМ ----------
      async function sendOrder(){
        const name = (document.getElementById('name').value || '').trim();
        const phone = (document.getElementById('phone').value || '').trim();
        const cart = getCart();
      
        if (!name || !phone || !cart.length) {
          if (window.M?.toast) M.toast({html:'Write name / number and add items'});
          return;
        }
      
        try {
          const pdfBlob = await buildPdfBlob();
          const formData = new FormData();
          formData.append('name', name);
          formData.append('phone', phone);
          formData.append('order', pdfBlob, 'order.pdf'); // ВЛОЖЕНИЕ PDF (совместим с Basin)
      
          const resp = await fetch(BASIN_URL, { method:'POST', body: formData });
          if (resp.ok) {
            if (window.M?.toast) M.toast({html:'Order Sent!'});
            localStorage.removeItem('cart');
            renderCart('#cartTable');
          } else {
            if (window.M?.toast) M.toast({html:'Order was not sent!'});
          }
        } catch (e) {
          console.error(e);
          if (window.M?.toast) M.toast({html:'Error to generate or to sent'});
        }
      }
      
      // ---------- init ----------
      document.addEventListener('DOMContentLoaded', renderCart('#cartTable'));
      </script>


      </div>
      <div class="divider"></div>
    </div>
  </div>

  <!--FOOTER CONTENT COPY-->
  <footer id="f" class="page-footer deep-purple lighten-4">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">Sunny Glass BIO</h5>
          <p class="grey-text text-lighten-4">
            <img src="img_bg/ua.png" alt="Ukraine Flag" class="flag-icon" />
            Раді Вас вітати на нашому сайті, для замовлення, або якщо виникли
            якісь питання звертатись за посиланнями або ж за номером телефону.
          </p>
          <p class="grey-text text-lighten-4">
            <img src="img_bg/ro.png" alt="Romania Flag" class="flag-icon" />
            Suntem bucuroși să vă urăm bun venit pe site-ul nostru, pentru a
            plasa o comandă sau, dacă aveți întrebări, contactați-ne folosind
            link-urile sau numărul de telefon.
          </p>
          <p class="grey-text text-lighten-4">
            <img src="img_bg/usa.png" alt="USA Flag" class="flag-icon" /> We
            are glad to welcome you to our website, to place an order, or if
            you have any questions, contact us using the links or phone
            number.
          </p>
        </div>
        <div class="col l3 s12">
          <h5 class="white-text">Links</h5>
          <div class="contact-icons-container justify-start no-margin">
            <a href="viber://chat?number=%2B380954890658" target="_blank"><img src="img_bg/viber.svg" alt="Viber"
                class="contact-icon" /></a>
            <a href="https://wa.me/380954890658" target="_blank"><img src="img_bg/whatsapp.svg" alt="WhatsApp"
                class="contact-icon" /></a>
            <a href="https://t.me/V_zhyt" target="_blank"><img src="img_bg/telegram.svg" alt="Telegram"
                class="contact-icon" /></a>
            <a href="https://www.facebook.com/weddingaccessoriesrom" target="_blank"><img src="img_bg/facebook.svg"
                alt="Facebook" class="contact-icon" /></a>
            <a href="https://www.instagram.com/wedd.ro?igsh=bDRndDczbTFvY2d3" target="_blank"><img
                src="img_bg/instagram.svg" alt="Instagram" class="contact-icon" /></a>
          </div>
        </div>
        <div class="col l3 s12">
          <h5 class="white-text">Keep in Touch</h5>
          <ul>
            <li>
              <a class="white-text" href="tel:+380954890658"><img src="img_bg/ua.png" alt="Ukraine Flag"
                  class="flag-icon" />
                Call : 0 (95) 489 06 58</a>
            </li>
            <!-- Modal Trigger -->
            <li>
              <a class="white-text modal-trigger mailus-container" href="#modal2"><i class="material-icons">mail</i>Mail
                us</a>
            </li>
            <!-- Modal Structure -->
            <div id="modal2" class="modal">
              <div class="modal-content deep-purple-text">
                <h4>Contact Form</h4>
                <div class="row">
                  <form action="https://formspree.io/f/xrblazyg" method="POST" class="col s12">
                    <div class="row">
                      <div class="input-field col s6">
                        <i class="material-icons prefix">account_circle</i>
                        <input id="icon_prefix" type="text" name="Name :" class="validate" />
                        <label for="icon_prefix">First and Last Name</label>
                      </div>
                      <div class="input-field col s6">
                        <i class="material-icons prefix">phone</i>
                        <input id="icon_telephone" type="tel" name="Phone Number :" class="validate" />
                        <label for="icon_telephone">Telephone</label>
                      </div>
                    </div>
                    <div class="row">
                      <div class="input-field col s12">
                        <input id="email" type="email" name="Email :" class="validate" />
                        <label for="email">Email</label>
                      </div>
                    </div>
                    <div class="row">
                      <div class="input-field col s12">
                        <textarea id="textarea1" name="message" class="materialize-textarea"></textarea>
                        <label for="textarea1">Text</label>
                      </div>
                    </div>
                    <button class="btn deep-purple lighten-4 waves-effect waves-purple" type="submit">
                      Submit
                      <i class="material-icons right">send</i>
                    </button>
                  </form>
                </div>
              </div>
              <div class="modal-footer">
                <a href="#!" class="modal-close waves-effect waves-light btn-small deep-purple lighten-4"><i
                    class="material-icons right">close</i>Close</a>
              </div>
            </div>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
        Made by
        <a class="orange-text text-lighten-3"
          href="https://instagram.com/vitalik_ztr?igshid=NTc4MTIwNjQ2YQ==">VitaliyZh</a>----@2025
      </div>
    </div>
  </footer>
  <!--FOOTER CONTENT END-->

  <!--FLOAT BUTTON MESSENGERS-->
  <a href="https://wa.me/380954890658" target="_blank" class="fab pulse" aria-label="WhatsApp">
    <img src="img_bg/whatsapp.svg" alt="WhatsApp" class="contact-icon" />
  </a>
  <a href="cart.html" class="fab fab-cart" aria-label="Корзина">
    <img src="img_bg/cart.svg" alt="Корзина" class="contact-icon" />
  </a>
  <!--FLOAT BUTTON MESSENGERS FINISH-->


  <!--  Scripts-->

  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>
  <script src="js/shop-common.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    /*Parallax*/
    $(document).ready(function () {
      $(".parallax").parallax();
    });
    /*DROPDOWM MENU*/
    $(".dropdown-trigger").dropdown();
    /*MODAL*/
    $(document).ready(function () {
      $(".modal").modal();
    });
    /*MATERIALBOX*/
    $(document).ready(function () {
      $(".materialboxed").materialbox();
    });

    var elem = document.querySelector(".collapsible.expandable");
    var instance = M.Collapsible.init(elem, {
      accordion: false,
    });

    /* right click img */
    let allImages = document.querySelectorAll("img");
    allImages.forEach((value) => {
      value.oncontextmenu = (e) => {
        e.preventDefault();
      };
    });
  </script>


<script>
    $(document).ready(function(){
    $('.collapsible').collapsible();
  });
</script>

</body>

</html>